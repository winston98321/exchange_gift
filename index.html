<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>Secret Santa 交換禮物</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 600px; 
            margin: auto; 
            padding: 20px; 
            text-align: center;
        }
        .name-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 10px; 
            margin-top: 20px; 
        }
        .name-btn { 
            padding: 10px; 
            background-color: #4CAF50; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
        }
        .recipient { 
            margin-top: 20px; 
            font-size: 20px; 
            font-weight: bold; 
            color: #333; 
        }
    </style>
</head>
<body>
    <h1>Secret Santa 交換禮物</h1>

    <div id="buttonsContainer" class="name-grid"></div>
    <div id="recipientArea" class="recipient"></div>

    <script>
        // 簡單的可重現隨機數生成器（線性同餘法）
        class SeededRandom {
            constructor(seed) {
                this.seed = seed;
            }

            next() {
                const a = 1664525;
                const c = 1013904223;
                const m = Math.pow(2, 32);
                this.seed = (a * this.seed + c) % m;
                return this.seed / m;
            }

            shuffle(array) {
                const result = [...array];
                for (let i = result.length - 1; i > 0; i--) {
                    const j = Math.floor(this.next() * (i + 1));
                    [result[i], result[j]] = [result[j], result[i]];
                }
                return result;
            }
        }

        const participants = [
            "小明", "小華", "阿強", 
            "小芳", "小美", "阿龍", 
            "小英", "小玲", "阿偉"
        ];

        const FIXED_SEED = 12345;
        const random = new SeededRandom(FIXED_SEED);
        const shuffledParticipants = random.shuffle(participants);

        let recipientMap = {};

        window.onload = function() {
            // 建立收禮人映射
            for (let i = 0; i < shuffledParticipants.length; i++) {
                recipientMap[shuffledParticipants[i]] = 
                    shuffledParticipants[(i + 1) % shuffledParticipants.length];
            }

            const buttonsContainer = document.getElementById('buttonsContainer');
            
            // 生成按鈕
            shuffledParticipants.forEach(name => {
                const btn = document.createElement('button');
                btn.textContent = name;
                btn.classList.add('name-btn');
                btn.onclick = () => showRecipient(name);
                buttonsContainer.appendChild(btn);
            });
        }

        function showRecipient(giver) {
            const recipientArea = document.getElementById('recipientArea');
            const recipient = recipientMap[giver];
            recipientArea.textContent = `${giver} 要送禮給 ${recipient}`;
        }
    </script>
</body>
</html>